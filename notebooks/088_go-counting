{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Go Counting\n",
    "\n",
    "Count the scored points on a Go board.\n",
    "\n",
    "In the game of go (also known as baduk, igo, cờ vây and wéiqí) points\n",
    "are gained by completely encircling empty intersections with your\n",
    "stones. The encircled intersections of a player are known as its\n",
    "territory.\n",
    "\n",
    "Write a function that determines the territory of each player. You may\n",
    "assume that any stones that have been stranded in enemy territory have\n",
    "already been taken off the board.\n",
    "\n",
    "Write a function that determines the territory which includes a specified coordinate.\n",
    "\n",
    "Multiple empty intersections may be encircled at once and for encircling\n",
    "only horizontal and vertical neighbours count. In the following diagram\n",
    "the stones which matter are marked \"O\" and the stones that don't are\n",
    "marked \"I\" (ignored).  Empty spaces represent empty intersections.\n",
    "\n",
    "```text\n",
    "+----+\n",
    "|IOOI|\n",
    "|O  O|\n",
    "|O OI|\n",
    "|IOI |\n",
    "+----+\n",
    "```\n",
    "\n",
    "To be more precise an empty intersection is part of a player's territory\n",
    "if all of its neighbours are either stones of that player or empty\n",
    "intersections that are part of that player's territory.\n",
    "\n",
    "For more information see\n",
    "[wikipedia](https://en.wikipedia.org/wiki/Go_%28game%29) or [Sensei's\n",
    "Library](http://senseis.xmp.net/).\n",
    "\n",
    "## Exception messages\n",
    "\n",
    "Sometimes it is necessary to raise an exception. When you do this, you should include a meaningful error message to\n",
    "indicate what the source of the error is. This makes your code more readable and helps significantly with debugging. Not\n",
    "every exercise will require you to raise an exception, but for those that do, the tests will only pass if you include\n",
    "a message.\n",
    "\n",
    "To raise a message with an exception, just write it as an argument to the exception type. For example, instead of\n",
    "`raise Exception`, you should write:\n",
    "\n",
    "```python\n",
    "raise Exception(\"Meaningful message indicating the source of the error\")\n",
    "```\n",
    "\n",
    "## Running the tests\n",
    "\n",
    "To run the tests, run the appropriate command below ([why they are different](https://github.com/pytest-dev/pytest/issues/1629#issue-161422224)):\n",
    "\n",
    "- Python 2.7: `py.test go_counting_test.py`\n",
    "- Python 3.3+: `pytest go_counting_test.py`\n",
    "\n",
    "Alternatively, you can tell Python to run the pytest module (allowing the same command to be used regardless of Python version):\n",
    "`python -m pytest go_counting_test.py`\n",
    "\n",
    "### Common `pytest` options\n",
    "\n",
    "- `-v` : enable verbose output\n",
    "- `-x` : stop running tests on first failure\n",
    "- `--ff` : run failures from previous test before running other test cases\n",
    "\n",
    "For other options, see `python -m pytest -h`\n",
    "\n",
    "## Submitting Exercises\n",
    "\n",
    "Note that, when trying to submit an exercise, make sure the solution is in the `$EXERCISM_WORKSPACE/python/go-counting` directory.\n",
    "\n",
    "You can find your Exercism workspace by running `exercism debug` and looking for the line that starts with `Workspace`.\n",
    "\n",
    "For more detailed information about running tests, code style and linting,\n",
    "please see the [help page](http://exercism.io/languages/python).\n",
    "\n",
    "## Submitting Incomplete Solutions\n",
    "\n",
    "It's possible to submit an incomplete solution so you can see how others have completed the exercise.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "\n",
    "class Board:\n",
    "    \"\"\"Count territories of each player in a Go game\n",
    "\n",
    "    Args:\n",
    "        board (list[str]): A two-dimensional Go board\n",
    "    \"\"\"\n",
    "\n",
    "    def __init__(self, board):\n",
    "        pass\n",
    "\n",
    "    def territory(self, x, y):\n",
    "        \"\"\"Find the owner and the territories given a coordinate on\n",
    "           the board\n",
    "\n",
    "        Args:\n",
    "            x (int): Column on the board\n",
    "            y (int): Row on the board\n",
    "\n",
    "        Returns:\n",
    "            (str, set): A tuple, the first element being the owner\n",
    "                        of that area.  One of \"W\", \"B\", \"\".  The\n",
    "                        second being a set of coordinates, representing\n",
    "                        the owner's territories.\n",
    "        \"\"\"\n",
    "        pass\n",
    "\n",
    "    def territories(self):\n",
    "        \"\"\"Find the owners and the territories of the whole board\n",
    "\n",
    "        Args:\n",
    "            none\n",
    "\n",
    "        Returns:\n",
    "            dict(str, set): A dictionary whose key being the owner\n",
    "                        , i.e. \"W\", \"B\", \"\".  The value being a set\n",
    "                        of coordinates owned by the owner.\n",
    "        \"\"\"\n",
    "        pass\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "import unittest\n",
    "\n",
    "\n",
    "# Tests adapted from `problem-specifications//canonical-data.json` @ v1.0.0\n",
    "\n",
    "board5x5 = [\n",
    "    \"  B  \",\n",
    "    \" B B \",\n",
    "    \"B W B\",\n",
    "    \" W W \",\n",
    "    \"  W  \"\n",
    "]\n",
    "\n",
    "\n",
    "class GoCountingTest(unittest.TestCase):\n",
    "    def test_black_corner_territory_on_5x5_board(self):\n",
    "        board = Board(board5x5)\n",
    "        stone, territory = board.territory(x=0, y=1)\n",
    "        self.assertEqual(stone, BLACK)\n",
    "        self.assertSetEqual(territory, {(0, 0), (0, 1), (1, 0)})\n",
    "\n",
    "    def test_white_center_territory_on_5x5_board(self):\n",
    "        board = Board(board5x5)\n",
    "        stone, territory = board.territory(x=2, y=3)\n",
    "        self.assertEqual(stone, WHITE)\n",
    "        self.assertSetEqual(territory, {(2, 3)})\n",
    "\n",
    "    def test_open_corner_territory_on_5x5_board(self):\n",
    "        board = Board(board5x5)\n",
    "        stone, territory = board.territory(x=1, y=4)\n",
    "        self.assertEqual(stone, NONE)\n",
    "        self.assertSetEqual(territory, {(0, 3), (0, 4), (1, 4)})\n",
    "\n",
    "    def test_a_stone_and_not_a_territory_on_5x5_board(self):\n",
    "        board = Board(board5x5)\n",
    "        stone, territory = board.territory(x=1, y=1)\n",
    "        self.assertEqual(stone, NONE)\n",
    "        self.assertSetEqual(territory, set())\n",
    "\n",
    "    def test_invalid_because_x_is_too_low(self):\n",
    "        board = Board(board5x5)\n",
    "        with self.assertRaisesWithMessage(ValueError):\n",
    "            board.territory(x=-1, y=1)\n",
    "\n",
    "    def test_invalid_because_x_is_too_high(self):\n",
    "        board = Board(board5x5)\n",
    "        with self.assertRaisesWithMessage(ValueError):\n",
    "            board.territory(x=5, y=1)\n",
    "\n",
    "    def test_invalid_because_y_is_too_low(self):\n",
    "        board = Board(board5x5)\n",
    "        with self.assertRaisesWithMessage(ValueError):\n",
    "            board.territory(x=1, y=-1)\n",
    "\n",
    "    def test_invalid_because_y_is_too_high(self):\n",
    "        board = Board(board5x5)\n",
    "        with self.assertRaisesWithMessage(ValueError):\n",
    "            board.territory(x=1, y=5)\n",
    "\n",
    "    def test_one_territory_is_the_whole_board(self):\n",
    "        board = Board([\" \"])\n",
    "        territories = board.territories()\n",
    "        self.assertSetEqual(territories[BLACK], set())\n",
    "        self.assertSetEqual(territories[WHITE], set())\n",
    "        self.assertSetEqual(territories[NONE], {(0, 0)})\n",
    "\n",
    "    def test_two_territories_rectangular_board(self):\n",
    "        input_board = [\n",
    "            \" BW \",\n",
    "            \" BW \"\n",
    "        ]\n",
    "        board = Board(input_board)\n",
    "        territories = board.territories()\n",
    "        self.assertSetEqual(territories[BLACK], {(0, 0), (0, 1)})\n",
    "        self.assertSetEqual(territories[WHITE], {(3, 0), (3, 1)})\n",
    "        self.assertSetEqual(territories[NONE], set())\n",
    "\n",
    "    def test_two_region_rectangular_board(self):\n",
    "        input_board = [\" B \"]\n",
    "        board = Board(input_board)\n",
    "        territories = board.territories()\n",
    "        self.assertSetEqual(territories[BLACK], {(0, 0), (2, 0)})\n",
    "        self.assertSetEqual(territories[WHITE], set())\n",
    "        self.assertSetEqual(territories[NONE], set())\n",
    "\n",
    "    # Utility functions\n",
    "    def setUp(self):\n",
    "        try:\n",
    "            self.assertRaisesRegex\n",
    "        except AttributeError:\n",
    "            self.assertRaisesRegex = self.assertRaisesRegexp\n",
    "\n",
    "    def assertRaisesWithMessage(self, exception):\n",
    "        return self.assertRaisesRegex(exception, r\".+\")\n",
    "\n",
    "\n",
    "unittest.main(argv=[''], exit=False)\n"
   ]
  }
 ],
 "metadata": {},
 "nbformat": 4,
 "nbformat_minor": 2
}
